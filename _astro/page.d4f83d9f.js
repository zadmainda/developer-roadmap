let t=[],o=(a,c)=>{let i,s=[],l={lc:0,l:c||0,value:a,set(n){l.value=n,l.notify()},get(){return l.lc||l.listen(()=>{})(),l.value},notify(n){i=s;let r=!t.length;for(let e=0;e<i.length;e+=2)t.push(i[e],l.value,n,i[e+1]);if(r){for(let e=0;e<t.length;e+=4){let f=!1;for(let u=e+7;u<t.length;u+=4)if(t[u]<t[e+3]){f=!0;break}f?t.push(t[e],t[e+1],t[e+2],t[e+3]):t[e](t[e+1],t[e+2])}t.length=0}},listen(n,r){return s===i&&(s=s.slice()),l.lc=s.push(n,r||l.l)/2,()=>{s===i&&(s=s.slice());let e=s.indexOf(n);~e&&(s.splice(e,2),l.lc--,l.lc||l.off())}},subscribe(n,r){let e=l.listen(n,r);return n(l.value),e},off(){}};return l};const g=o(""),p=o(!1);export{g as p,p as s};
